<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empanada Production Calculator</title>
    <style>
        /* [Previous CSS remains exactly the same] */
    </style>
</head>
<body>
    <!-- [Previous HTML remains exactly the same until the script tag] -->

    <script>
        // Constants
        const DOUGH_BATCH_SIZE = 12;
        const FILLING_BATCH_SIZE = 12;
        
        // Dough ingredients per batch
        const doughRecipe = {
            cakeFlour: 250,
            breadFlour: 200,
            margarine: 200,
            salt: 2,
            paprika: 1,
            turmeric: 0.5,
            bakingPowder: 0.25,
            milkPowder: 2,
            stockPowder: 2,
            vinegar: 1,
            water: 220
        };
        
        // Filling ingredients per batch
        const fillingRecipe = {
            meat: 333,
            vegetables: 100,
            potato: 133,
            onion: 33,
            thickener: 1,
            liquid: 50
        };
        
        // Initialize when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const orderQuantityInput = document.getElementById('orderQuantity');
            const calculateOrderBtn = document.getElementById('calculateOrder');
            const orderResults = document.getElementById('orderResults');
            const orderResultsContent = document.getElementById('orderResultsContent');
            
            const meatAvailableInput = document.getElementById('meatAvailable');
            const ingredientTypeSelect = document.getElementById('ingredientType');
            const calculateFromIngredientsBtn = document.getElementById('calculateFromIngredients');
            const ingredientResults = document.getElementById('ingredientResults');
            const ingredientResultsContent = document.getElementById('ingredientResultsContent');
            
            // Event listeners
            calculateOrderBtn.addEventListener('click', calculateForOrder);
            calculateFromIngredientsBtn.addEventListener('click', calculateFromIngredients);
            
            // Calculate ingredients needed for a specific number of empanadas
            function calculateForOrder() {
                const quantity = parseInt(orderQuantityInput.value);
                
                if (isNaN(quantity) {
                    alert('Please enter a valid number');
                    return;
                }
                
                if (quantity < 1) {
                    alert('Quantity must be at least 1');
                    return;
                }
                
                // Calculate number of batches needed (round up)
                const doughBatches = Math.ceil(quantity / DOUGH_BATCH_SIZE);
                const fillingBatches = Math.ceil(quantity / FILLING_BATCH_SIZE);
                
                // Calculate ingredients
                const doughIngredients = calculateIngredients(doughRecipe, doughBatches);
                const fillingIngredients = calculateIngredients(fillingRecipe, fillingBatches);
                
                // Display results
                let html = `
                    <p><strong>For ${quantity} empanadas you need:</strong></p>
                    <p>Dough batches: ${doughBatches}</p>
                    <p>Filling batches: ${fillingBatches}</p>
                    
                    <h4>Dough Ingredients:</h4>
                    <ul>
                        <li>Cake flour: ${doughIngredients.cakeFlour}g</li>
                        <li>Bread flour: ${doughIngredients.breadFlour}g</li>
                        <li>Cold margarine: ${doughIngredients.margarine}g</li>
                        <li>Salt: ${doughIngredients.salt}tsp</li>
                        <li>Paprika: ${doughIngredients.paprika}tsp</li>
                        <li>Turmeric: ${doughIngredients.turmeric}tsp</li>
                        <li>Baking powder: ${doughIngredients.bakingPowder}tsp</li>
                        <li>Milk powder: ${doughIngredients.milkPowder}tsp</li>
                        <li>Garlic/onion stock powder: ${doughIngredients.stockPowder}tsp</li>
                        <li>White vinegar: ${doughIngredients.vinegar}tsp</li>
                        <li>Ice-cold water: ~${doughIngredients.water}ml</li>
                    </ul>
                    
                    <h4>Filling Ingredients:</h4>
                    <ul>
                        <li>Meat: ${fillingIngredients.meat}g</li>
                        <li>Mixed vegetables: ${fillingIngredients.vegetables}g</li>
                        <li>Potato: ${fillingIngredients.potato}g</li>
                        <li>Onion: ${fillingIngredients.onion}g</li>
                        <li>Thickener: ${fillingIngredients.thickener}tbsp</li>
                        <li>Water/stock: ${fillingIngredients.liquid}ml</li>
                    </ul>
                `;
                
                orderResultsContent.innerHTML = html;
                orderResults.style.display = 'block';
            }
            
            // Calculate how many empanadas can be made from available ingredients
            function calculateFromIngredients() {
                const meatAvailable = parseFloat(meatAvailableInput.value);
                const calculationType = ingredientTypeSelect.value;
                
                if (isNaN(meatAvailable)) {
                    alert('Please enter a valid amount');
                    return;
                }
                
                if (meatAvailable <= 0) {
                    alert('Amount must be greater than 0');
                    return;
                }
                
                let empanadasPossible, batchesPossible;
                let limitingFactor = "";
                
                if (calculationType === 'meat') {
                    // Calculate based on meat availability
                    batchesPossible = meatAvailable / fillingRecipe.meat;
                    limitingFactor = "meat";
                } else {
                    // Calculate based on dough (1kg meat makes 3 batches)
                    batchesPossible = meatAvailable / 333;
                    limitingFactor = "dough";
                }
                
                empanadasPossible = Math.floor(batchesPossible * 12);
                
                // Calculate all ingredients needed
                const doughBatches = Math.floor(batchesPossible);
                const fillingBatches = Math.floor(batchesPossible);
                
                const doughIngredients = calculateIngredients(doughRecipe, doughBatches);
                const fillingIngredients = calculateIngredients(fillingRecipe, fillingBatches);
                
                // Display results
                let html = `
                    <p><strong>With ${meatAvailable}g of meat (limited by ${limitingFactor}):</strong></p>
                    <p>You can make ${empanadasPossible} empanadas</p>
                    <p>Dough batches needed: ${doughBatches}</p>
                    <p>Filling batches needed: ${fillingBatches}</p>
                    
                    <h4>Additional Ingredients Needed:</h4>
                    <ul>
                        <li>Cake flour: ${doughIngredients.cakeFlour}g</li>
                        <li>Bread flour: ${doughIngredients.breadFlour}g</li>
                        <li>Mixed vegetables: ${fillingIngredients.vegetables}g</li>
                        <li>Potato: ${fillingIngredients.potato}g</li>
                        <li>Onion: ${fillingIngredients.onion}g</li>
                    </ul>
                `;
                
                ingredientResultsContent.innerHTML = html;
                ingredientResults.style.display = 'block';
            }
            
            // Helper function to calculate scaled ingredients
            function calculateIngredients(recipe, batches) {
                const scaled = {};
                for (const [ingredient, amount] of Object.entries(recipe)) {
                    // Handle teaspoons/tablespoons differently
                    if (typeof amount === 'number') {
                        scaled[ingredient] = Math.round(amount * batches * 100) / 100;
                    } else {
                        scaled[ingredient] = amount; // For non-numeric values (unused in current recipe)
                    }
                }
                return scaled;
            }
        });
    </script>
</body>
</html>
