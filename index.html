<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empanada Production Calculator</title>
    <style>
        :root {
            --primary: #FF6B35;
            --secondary: #004E89;
            --accent: #FFBE0B;
            --light: #F7F7FF;
            --dark: #292929;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--primary);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        h1 {
            margin: 0;
            font-size: 2.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .calculator-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .calculator {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .calculator h2 {
            color: var(--secondary);
            margin-top: 0;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--secondary);
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        button:hover {
            background-color: var(--secondary);
        }
        
        .results {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 5px;
            border-left: 4px solid var(--accent);
        }
        
        .results h3 {
            margin-top: 0;
            color: var(--secondary);
        }
        
        .recipe-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        .recipe-card h2 {
            color: var(--secondary);
            margin-top: 0;
        }
        
        .recipe-columns {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .recipe-column {
            flex: 1;
            min-width: 250px;
        }
        
        .ingredient-list {
            margin: 0;
            padding-left: 20px;
        }
        
        .ingredient-list li {
            margin-bottom: 8px;
        }
        
        .batch-info {
            background-color: #FFF8E1;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Empanada Production Calculator</h1>
            <p class="subtitle">Calculate ingredients for your empanada business</p>
        </header>
        
        <div class="calculator-section">
            <div class="calculator">
                <h2>Order Calculator</h2>
                <p>Calculate ingredients needed for a specific number of empanadas.</p>
                
                <div class="input-group">
                    <label for="orderQuantity">Number of Empanadas Needed:</label>
                    <input type="number" id="orderQuantity" min="1" value="72">
                </div>
                
                <button id="calculateOrder">Calculate Ingredients</button>
                
                <div class="results" id="orderResults" style="display: none;">
                    <h3>Ingredients Needed</h3>
                    <div id="orderResultsContent"></div>
                </div>
            </div>
            
            <div class="calculator">
                <h2>Ingredient Calculator</h2>
                <p>Calculate how many empanadas you can make with available ingredients.</p>
                
                <div class="input-group">
                    <label for="meatAvailable">Meat Available (grams):</label>
                    <input type="number" id="meatAvailable" min="0" value="1000">
                </div>
                
                <div class="input-group">
                    <label for="ingredientType">Calculate based on:</label>
                    <select id="ingredientType">
                        <option value="meat">Meat</option>
                        <option value="dough">Dough</option>
                    </select>
                </div>
                
                <button id="calculateFromIngredients">Calculate Production</button>
                
                <div class="results" id="ingredientResults" style="display: none;">
                    <h3>Production Capacity</h3>
                    <div id="ingredientResultsContent"></div>
                </div>
            </div>
        </div>
        
        <div class="recipe-card">
            <h2>Standard Recipes</h2>
            
            <div class="recipe-columns">
                <div class="recipe-column">
                    <h3>Dough (per batch - makes 12 empanadas)</h3>
                    <ul class="ingredient-list">
                        <li>Cake flour: 250g</li>
                        <li>Bread flour: 200g</li>
                        <li>Cold margarine: 200g</li>
                        <li>Salt: 2 tsp</li>
                        <li>Paprika: 1 tsp</li>
                        <li>Turmeric: ½ tsp</li>
                        <li>Baking powder: ¼ tsp</li>
                        <li>Milk powder: 2 tsp</li>
                        <li>Garlic/onion stock powder: 2 tsp</li>
                        <li>White vinegar: 1 tsp</li>
                        <li>Ice-cold water: ~220ml</li>
                    </ul>
                </div>
                
                <div class="recipe-column">
                    <h3>Filling (per 12 empanadas)</h3>
                    <ul class="ingredient-list">
                        <li>Meat: 333g</li>
                        <li>Mixed vegetables: 100g</li>
                        <li>Potato: 133g</li>
                        <li>Onion: 33g</li>
                        <li>Thickener: 1 tbsp</li>
                        <li>Water/stock: 50ml</li>
                    </ul>
                    <div class="batch-info">
                        <strong>Note:</strong> Filling batches consolidate to max 1kg meat (36 empanadas per large batch)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Constants
        const DOUGH_BATCH_SIZE = 12;  // empanadas per standard dough batch
        const FILLING_BATCH_SIZE = 12; // empanadas per standard filling batch
        const MAX_MEAT_PER_BATCH = 1000; // 1kg meat limit per filling batch
        const MAX_DOUGH_WEIGHT = 1000;  // 1kg dough limit per batch
        
        // Rounding rules
        const ROUND_GRAMS_TO = 10;     // Nearest 10g
        const ROUND_TSP_TO = 0.25;     // Nearest 1/4 tsp

        // Dough recipe per full batch (12 empanadas)
        const doughRecipe = {
            cakeFlour: 250,
            breadFlour: 200,
            margarine: 200,
            salt: 2,
            paprika: 1,
            turmeric: 0.5,
            bakingPowder: 0.25,
            milkPowder: 2,
            stockPowder: 2,
            vinegar: 1,
            water: 220
        };
        
        // Filling recipe per full batch (12 empanadas)
        const fillingRecipe = {
            meat: 333,
            vegetables: 100,
            potato: 133,
            onion: 33,
            thickener: 1,
            liquid: 50
        };

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Set up event listeners
            document.getElementById('calculateOrder').addEventListener('click', calculateForOrder);
            document.getElementById('calculateFromIngredients').addEventListener('click', calculateFromIngredients);
            
            // Test calculation on load
            calculateForOrder();
        });

        // Calculate ingredients needed for a specific number of empanadas
        function calculateForOrder() {
            const quantity = parseInt(document.getElementById('orderQuantity').value);
            const orderResults = document.getElementById('orderResults');
            const orderResultsContent = document.getElementById('orderResultsContent');
            
            if (isNaN(quantity)) {
                alert('Please enter a valid number');
                return;
            }
            
            if (quantity < 1) {
                alert('Quantity must be at least 1');
                return;
            }
            
            // DOUGH CALCULATION
            const doughBatches = Math.ceil(quantity / DOUGH_BATCH_SIZE);
            const doughIngredients = calculateIngredients(doughRecipe, doughBatches);
            
            // FILLING CALCULATION (adjusted for 1kg meat batches)
            const fillingBatches = Math.ceil((quantity * fillingRecipe.meat / FILLING_BATCH_SIZE) / MAX_MEAT_PER_BATCH);
            const largeFillingMultiplier = quantity / (fillingBatches * FILLING_BATCH_SIZE);
            const fillingIngredients = calculateIngredients(fillingRecipe, largeFillingMultiplier * fillingBatches);
            
            // Display results
            orderResultsContent.innerHTML = `
                <div class="batch-info">
                    <p><strong>For ${quantity} empanadas you need:</strong></p>
                    <p>Dough: ${doughBatches} standard batches (12 empanadas each)</p>
                    <p>Filling: ${fillingBatches} large batches (${Math.round(quantity/fillingBatches)} empanadas each, max 1kg meat per batch)</p>
                </div>
                
                <h4>Dough Ingredients:</h4>
                <ul>
                    <li>Cake flour: ${roundTo(doughIngredients.cakeFlour, ROUND_GRAMS_TO)}g</li>
                    <li>Bread flour: ${roundTo(doughIngredients.breadFlour, ROUND_GRAMS_TO)}g</li>
                    <li>Cold margarine: ${roundTo(doughIngredients.margarine, ROUND_GRAMS_TO)}g</li>
                    <li>Salt: ${roundTo(doughIngredients.salt, ROUND_TSP_TO)} tsp</li>
                    <li>Paprika: ${roundTo(doughIngredients.paprika, ROUND_TSP_TO)} tsp</li>
                    <li>Turmeric: ${roundTo(doughIngredients.turmeric, ROUND_TSP_TO)} tsp</li>
                    <li>Baking powder: ${roundTo(doughIngredients.bakingPowder, ROUND_TSP_TO)} tsp</li>
                    <li>Milk powder: ${roundTo(doughIngredients.milkPowder, ROUND_TSP_TO)} tsp</li>
                    <li>Garlic/onion stock powder: ${roundTo(doughIngredients.stockPowder, ROUND_TSP_TO)} tsp</li>
                    <li>White vinegar: ${roundTo(doughIngredients.vinegar, ROUND_TSP_TO)} tsp</li>
                    <li>Ice-cold water: ~${roundTo(doughIngredients.water, ROUND_GRAMS_TO)}ml</li>
                </ul>
                
                <h4>Filling Ingredients:</h4>
                <ul>
                    <li>Meat: ${roundTo(fillingIngredients.meat, ROUND_GRAMS_TO)}g (${fillingBatches} × ${roundTo(fillingIngredients.meat/fillingBatches, ROUND_GRAMS_TO)}g per batch)</li>
                    <li>Mixed vegetables: ${roundTo(fillingIngredients.vegetables, ROUND_GRAMS_TO)}g</li>
                    <li>Potato: ${roundTo(fillingIngredients.potato, ROUND_GRAMS_TO)}g</li>
                    <li>Onion: ${roundTo(fillingIngredients.onion, ROUND_GRAMS_TO)}g</li>
                    <li>Thickener: ${roundTo(fillingIngredients.thickener, ROUND_TSP_TO)} tbsp</li>
                    <li>Water/stock: ${roundTo(fillingIngredients.liquid, ROUND_GRAMS_TO)}ml</li>
                </ul>
            `;
            
            orderResults.style.display = 'block';
        }

        // Calculate how many empanadas can be made from available ingredients
        function calculateFromIngredients() {
            const meatAvailable = parseFloat(document.getElementById('meatAvailable').value);
            const calculationType = document.getElementById('ingredientType').value;
            const ingredientResults = document.getElementById('ingredientResults');
            const ingredientResultsContent = document.getElementById('ingredientResultsContent');
            
            if (isNaN(meatAvailable)) {
                alert('Please enter a valid amount');
                return;
            }
            
            if (meatAvailable <= 0) {
                alert('Amount must be greater than 0');
                return;
            }
            
            let empanadasPossible, batchesPossible;
            let limitingFactor = "";
            
            if (calculationType === 'meat') {
                // Calculate based on meat availability
                batchesPossible = meatAvailable / fillingRecipe.meat;
                limitingFactor = "meat";
            } else {
                // Calculate based on dough (1kg meat makes 3 batches)
                batchesPossible = meatAvailable / 333;
                limitingFactor = "dough";
            }
            
            empanadasPossible = Math.floor(batchesPossible * 12);
            const doughBatches = Math.floor(batchesPossible);
            const fillingBatches = Math.floor(batchesPossible);
            
            const doughIngredients = calculateIngredients(doughRecipe, doughBatches);
            const fillingIngredients = calculateIngredients(fillingRecipe, fillingBatches);
            
            // Display results
            ingredientResultsContent.innerHTML = `
                <p><strong>With ${meatAvailable}g of meat (limited by ${limitingFactor}):</strong></p>
                <p>You can make ${empanadasPossible} empanadas</p>
                <p>Dough batches needed: ${doughBatches}</p>
                <p>Filling batches needed: ${fillingBatches}</p>
                
                <h4>Additional Ingredients Needed:</h4>
                <ul>
                    <li>Cake flour: ${roundTo(doughIngredients.cakeFlour, ROUND_GRAMS_TO)}g</li>
                    <li>Bread flour: ${roundTo(doughIngredients.breadFlour, ROUND_GRAMS_TO)}g</li>
                    <li>Mixed vegetables: ${roundTo(fillingIngredients.vegetables, ROUND_GRAMS_TO)}g</li>
                    <li>Potato: ${roundTo(fillingIngredients.potato, ROUND_GRAMS_TO)}g</li>
                    <li>Onion: ${roundTo(fillingIngredients.onion, ROUND_GRAMS_TO)}g</li>
                </ul>
            `;
            
            ingredientResults.style.display = 'block';
        }

        // Helper functions
        function roundTo(value, increment) {
            return Math.round(value / increment) * increment;
        }

        function calculateIngredients(recipe, multiplier) {
            const scaled = {};
            for (const [ingredient, amount] of Object.entries(recipe)) {
                scaled[ingredient] = amount * multiplier;
            }
            return scaled;
        }
    </script>
// workflow button
    <div class="calculator">
  <h2>Production Workflow</h2>
  <p>Generate optimized schedules for orders.</p>
  <button onclick="window.open('workflow.html', '_blank')">Open Workflow Planner</button>
</div>
</body>
</html>
